(function(){"use strict";var _=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("k-field",e._b({staticClass:"k-structure-field"},"k-field",e.$props,!1),[t("section",{class:["k-structure-form",{"is-open":e.isOpen}]},[t("div",{class:["k-entity-header",{"is-clickable":e.toggle}],on:{click:e.toggleForm}},[t("div",{staticClass:"k-entity-header-title"},[t("k-icon",{directives:[{name:"show",rawName:"v-show",value:e.icon,expression:"icon"}],attrs:{type:e.icon}}),t("label",{staticClass:"k-field-label"},[e._v(e._s(e.label))])],1),t("k-icon",{directives:[{name:"show",rawName:"v-show",value:e.toggle,expression:"toggle"}],attrs:{type:e.isOpen?"angle-up":"angle-down"}})],1),e.isOpen?t("k-form",{ref:"form",staticClass:"k-structure-form-fields",attrs:{fields:e.formFields},on:{input:e.onInput},model:{value:e.model,callback:function(r){e.model=r},expression:"model"}}):e._e()],1)])},p=[],C="",$="";function h(e,i,t,r,l,d,u,k){var n=typeof e=="function"?e.options:e;i&&(n.render=i,n.staticRenderFns=t,n._compiled=!0),r&&(n.functional=!0),d&&(n._scopeId="data-v-"+d);var o;if(u?(o=function(s){s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!s&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(s=__VUE_SSR_CONTEXT__),l&&l.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(u)},n._ssrRegister=o):l&&(o=k?function(){l.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:l),o)if(n.functional){n._injectStyles=o;var b=n.render;n.render=function(O,f){return o.call(f),b(O,f)}}else{var c=n.beforeCreate;n.beforeCreate=c?[].concat(c,o):[o]}return{exports:e,options:n}}const v={props:{endpoints:Object,fields:Object,label:String,toggle:Boolean,icon:String,value:{type:Boolean,default:!0},name:{type:Boolean,default:!0}},data(){return{model:null,isOpen:null}},computed:{id(){return`entity-open:${this.endpoints.field}`},formFields(){return Object.keys(this.fields).reduce((e,i)=>{let t=this.fields[i];return t.section=this.name,t.endpoints={field:this.endpoints.field+"+"+i,section:this.endpoints.section,model:this.endpoints.model},e[i]=t,e},{})}},watch:{value:{immediate:!0,handler(e){e?this.model=this.$helper.clone(e):this.model=this.createFields()}}},created(){this.isOpen=!this.toggle||localStorage.getItem(this.id)!=="false"},methods:{onInput(){this.$emit("input",this.model)},toggleForm(){this.toggle&&(this.isOpen=!this.isOpen,localStorage.setItem(this.id,this.isOpen))},createFields(){return Object.keys(this.fields).reduce((e,i)=>{const t=this.fields[i];return e[i]=t.default?this.$helper.clone(t.default):null,e},{})}}},a={};var m=h(v,_,p,!1,g,"27e77f08",null,null);function g(e){for(let i in a)this[i]=a[i]}var y=function(){return m.exports}();window.panel.plugin("oblik/entity-field",{fields:{entity:y}})})();
