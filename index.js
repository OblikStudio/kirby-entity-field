(()=>{var R=Object.defineProperty,E=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var m=(o,i,l)=>i in o?R(o,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[i]=l,g=(o,i)=>{for(var l in i||(i={}))T.call(i,l)&&m(o,l,i[l]);if(v)for(var l of v(i))j.call(i,l)&&m(o,l,i[l]);return o},y=(o,i)=>E(o,I(i));(function(){"use strict";var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("k-field",e._b({staticClass:"k-structure-field"},"k-field",e.$props,!1),[t("section",{class:["k-structure-form",{"is-open":e.isOpen}]},[t("div",{class:["k-entity-header",{"is-clickable":e.toggle}],on:{click:e.toggleForm}},[t("div",{staticClass:"k-entity-header-title"},[t("k-icon",{directives:[{name:"show",rawName:"v-show",value:e.icon,expression:"icon"}],attrs:{type:e.icon}}),t("label",{staticClass:"k-field-label"},[e._v(e._s(e.label))])],1),t("k-icon",{directives:[{name:"show",rawName:"v-show",value:e.toggle,expression:"toggle"}],attrs:{type:e.isOpen?"angle-up":"angle-down"}})],1),e.isOpen?t("k-form",{ref:"form",staticClass:"k-structure-form-fields",attrs:{fields:e.formFields},on:{input:e.onInput},model:{value:e.model,callback:function(u){e.model=u},expression:"model"}}):e._e()],1)])},i=[],l="",B="";function k(e,s,t,u,d,f,_,w){var n=typeof e=="function"?e.options:e;s&&(n.render=s,n.staticRenderFns=t,n._compiled=!0),u&&(n.functional=!0),f&&(n._scopeId="data-v-"+f);var a;if(_?(a=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(r=__VUE_SSR_CONTEXT__),d&&d.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(_)},n._ssrRegister=a):d&&(a=w?function(){d.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:d),a)if(n.functional){n._injectStyles=a;var F=n.render;n.render=function(S,h){return a.call(h),F(S,h)}}else{var p=n.beforeCreate;n.beforeCreate=p?[].concat(p,a):[a]}return{exports:e,options:n}}const b={props:{endpoints:Object,fields:Object,label:String,toggle:Boolean,icon:String,value:{type:Boolean,default:!0},name:{type:Boolean,default:!0}},data(){return{model:null,isOpen:null}},computed:{id(){return`entity-open:${this.endpoints.field}`},formFields(){return Object.values(this.fields).reduce((e,[s,t])=>(e[s]=y(g({},t),{section:this.name,endpoints:{field:this.endpoints.field+"+"+s,section:this.endpoints.section,model:this.endpoints.model}}),e),{})}},watch:{value:{immediate:!0,handler(e){e?this.model=this.$helper.clone(e):this.model=this.createFields()}}},created(){this.isOpen=!this.toggle||localStorage.getItem(this.id)!=="false"},methods:{onInput(){this.$emit("input",this.model)},toggleForm(){this.toggle&&(this.isOpen=!this.isOpen,localStorage.setItem(this.id,this.isOpen))},createFields(){return Object.values(this.fields).reduce((e,[s,t])=>(e[s]=t.default?this.$helper.clone(t.default):null,e),{})}}},c={};var O=k(b,o,i,!1,C,"0ec5fbe9",null,null);function C(e){for(let s in c)this[s]=c[s]}var $=function(){return O.exports}();window.panel.plugin("oblik/entity-field",{fields:{entity:$}})})();})();
