(()=>{var R=Object.defineProperty,E=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var m=(o,t,l)=>t in o?R(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l,g=(o,t)=>{for(var l in t||(t={}))N.call(t,l)&&m(o,l,t[l]);if(v)for(var l of v(t))T.call(t,l)&&m(o,l,t[l]);return o},y=(o,t)=>E(o,I(t));(function(){"use strict";var o=function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("k-field",e._b({staticClass:"k-structure-field"},"k-field",e.$props,!1),[s("section",{class:["k-structure-form",{"is-open":e.isOpen}]},[s("div",{class:["k-entity-header",{"is-clickable":e.toggle}],on:{click:e.toggleForm}},[s("div",{staticClass:"k-entity-header-title"},[s("k-icon",{directives:[{name:"show",rawName:"v-show",value:e.icon,expression:"icon"}],attrs:{type:e.icon}}),s("label",{staticClass:"k-field-label"},[e._v(e._s(e.label))])],1),s("k-icon",{directives:[{name:"show",rawName:"v-show",value:e.toggle,expression:"toggle"}],attrs:{type:e.isOpen?"angle-up":"angle-down"}})],1),s("k-form",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],ref:"form",staticClass:"k-structure-form-fields",attrs:{fields:e.formFields},on:{input:e.onInput},model:{value:e.model,callback:function(u){e.model=u},expression:"model"}})],1)])},t=[],l="",j="";function k(e,i,s,u,d,f,p,$){var n=typeof e=="function"?e.options:e;i&&(n.render=i,n.staticRenderFns=s,n._compiled=!0),u&&(n.functional=!0),f&&(n._scopeId="data-v-"+f);var a;if(p?(a=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(r=__VUE_SSR_CONTEXT__),d&&d.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(p)},n._ssrRegister=a):d&&(a=$?function(){d.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:d),a)if(n.functional){n._injectStyles=a;var F=n.render;n.render=function(S,h){return a.call(h),F(S,h)}}else{var _=n.beforeCreate;n.beforeCreate=_?[].concat(_,a):[a]}return{exports:e,options:n}}const b={props:{endpoints:Object,fields:Object,label:String,toggle:Boolean,icon:String,value:{type:Boolean,default:!0},name:{type:Boolean,default:!0}},data(){let e=localStorage.getItem(`entity-open:${this.endpoints.field}`)!=="false";return{model:null,isOpen:!this.toggle||e}},computed:{id(){return`entity-open:${this.endpoints.field}`},formFields(){return Object.keys(this.fields).reduce((e,i)=>(e[i]=y(g({},this.fields[i]),{section:this.name,endpoints:{field:this.endpoints.field+"+"+i,section:this.endpoints.section,model:this.endpoints.model}}),e),{})}},watch:{value:{immediate:!0,handler(e){e?this.model=this.$helper.clone(e):this.model=this.createFields()}}},methods:{onInput(){this.$emit("input",this.model)},toggleForm(){this.toggle&&(this.isOpen=!this.isOpen,localStorage.setItem(this.id,this.isOpen))},createFields(){return Object.keys(this.fields).reduce((e,i)=>{const s=this.fields[i];return e[i]=s.default?this.$helper.clone(s.default):null,e},{})}}},c={};var O=k(b,o,t,!1,w,"20b3f691",null,null);function w(e){for(let i in c)this[i]=c[i]}var C=function(){return O.exports}();window.panel.plugin("oblik/entity-field",{fields:{entity:C}})})();})();
