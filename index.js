(()=>{(function(){"use strict";var _=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("k-field",e._b({staticClass:"k-structure-field"},"k-field",e.$props,!1),[t("section",{class:["k-structure-form",{"is-open":e.isOpen}]},[t("div",{class:["k-entity-header",{"is-clickable":e.toggle}],on:{click:e.toggleForm}},[t("div",{staticClass:"k-entity-header-title"},[e.icon?t("k-icon",{attrs:{type:e.icon}}):e._e(),t("label",{staticClass:"k-field-label"},[e._v(e._s(e.label))])],1),e.toggle?t("k-icon",{attrs:{type:e.isOpen?"angle-up":"angle-down"}}):e._e()],1),t("k-form",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],ref:"form",staticClass:"k-structure-form-fields",attrs:{fields:e.formFields},on:{input:e.input},model:{value:e.model,callback:function(r){e.model=r},expression:"model"}})],1)])},p=[],C="",$="";function h(e,i,t,r,o,d,f,y){var s=typeof e=="function"?e.options:e;i&&(s.render=i,s.staticRenderFns=t,s._compiled=!0),r&&(s.functional=!0),d&&(s._scopeId="data-v-"+d);var l;if(f?(l=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(f)},s._ssrRegister=l):o&&(l=y?function(){o.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(s.functional){s._injectStyles=l;var O=s.render;s.render=function(b,u){return l.call(u),O(b,u)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:s}}const v={props:{endpoints:Object,fields:Object,label:String,toggle:Boolean,icon:String,value:!0,name:!0},created(){},data(){let e=localStorage[`entity-open:${this.endpoints.field}`]!=="false";return{model:null,isOpen:!this.toggle||e}},computed:{formFields(){let e={};return Object.keys(this.fields).forEach(i=>{let t=this.fields[i];t.section=this.name,t.endpoints={field:this.endpoints.field+"+"+i,section:this.endpoints.section,model:this.endpoints.model},e[i]=t}),e}},methods:{input(){this.$emit("input",this.model)},toggleForm(){this.toggle&&(this.isOpen=!this.isOpen,localStorage[`entity-open:${this.endpoints.field}`]=this.isOpen)},createFields(){let e={};return Object.keys(this.fields).forEach(i=>{const t=this.fields[i];t.default?e[i]=this.$helper.clone(t.default):e[i]=null}),e}},watch:{value:{immediate:!0,handler(e){e?this.model=this.$helper.clone(e):this.model=this.createFields()}}}},a={};var m=h(v,_,p,!1,g,"a560e814",null,null);function g(e){for(let i in a)this[i]=a[i]}var k=function(){return m.exports}();panel.plugin("oblik/entity-field",{fields:{entity:k}})})();})();
